(this["webpackJsonpmern-employee-management"]=this["webpackJsonpmern-employee-management"]||[]).push([[0],{40:function(e,t,a){},41:function(e,t,a){"use strict";a.r(t);var o=a(0),c=a(6),n=a.n(c),r=a(16),s=a(3),l=a.n(s),i=a(1);const h="http://localhost:5005",m=()=>{const[e,t]=Object(o.useState)(""),[a,c]=Object(o.useState)(""),[n,r]=Object(o.useState)("");return Object(i.jsxs)("div",{children:[Object(i.jsx)("h2",{children:"Login"}),Object(i.jsx)("input",{type:"text",value:e,onChange:e=>t(e.target.value),placeholder:"Username"}),Object(i.jsx)("input",{type:"password",value:a,onChange:e=>c(e.target.value),placeholder:"Password"}),Object(i.jsx)("button",{onClick:async()=>{try{const t=await l.a.post("".concat(h,"/auth/login"),{userName:e,password:a});r(t.data.token)}catch(t){console.error("Login error:",t)}},children:"Login"})]})},d=()=>{const[e,t]=Object(o.useState)([]),[a,c]=Object(o.useState)({name:"",email:"",mobile:"",designation:"",gender:"",course:"",image:null});Object(o.useEffect)((()=>{(async()=>{try{const e=await l.a.get("".concat(h,"/employees"),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});t(e.data)}catch(e){console.error("Error fetching employees:",e)}})()}),[]);return Object(i.jsxs)("div",{children:[Object(i.jsx)("h2",{children:"Employee Management"}),Object(i.jsx)("input",{type:"text",value:a.name,onChange:e=>c({...a,name:e.target.value}),placeholder:"Name"}),Object(i.jsx)("input",{type:"file",onChange:e=>c({...a,image:e.target.files[0]})}),Object(i.jsx)("button",{onClick:async()=>{const e=new FormData;Object.keys(a).forEach((t=>{e.append(t,a[t])}));try{await l.a.post("".concat(h,"/employees"),e,{headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat(localStorage.getItem("token"))}});const a=await l.a.get("".concat(h,"/employees"),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});t(a.data)}catch(o){console.error("Error creating employee:",o)}},children:"Create Employee"}),Object(i.jsx)("h3",{children:"Employee List"}),Object(i.jsx)("ul",{children:e.map((e=>Object(i.jsxs)("li",{children:[e.name," - ",e.email,Object(i.jsx)("button",{onClick:()=>(async e=>{const o=new FormData;Object.keys(a).forEach((e=>{o.append(e,a[e])}));try{await l.a.put("".concat(h,"/employees/").concat(e),o,{headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat(localStorage.getItem("token"))}});const a=await l.a.get("".concat(h,"/employees"),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});t(a.data)}catch(c){console.error("Error updating employee:",c)}})(e._id),children:"Update"}),Object(i.jsx)("button",{onClick:()=>(async e=>{try{await l.a.delete("".concat(h,"/employees/").concat(e),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});const a=await l.a.get("".concat(h,"/employees"),{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});t(a.data)}catch(a){console.error("Error deleting employee:",a)}})(e._id),children:"Delete"})]},e._id)))})]})};var p=()=>Object(i.jsxs)("div",{children:[Object(i.jsx)(m,{}),Object(i.jsx)(d,{})]});a(40);n.a.render(Object(i.jsx)(r.a,{children:Object(i.jsx)(p,{})}),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.07be2b2c.chunk.js.map